> 转载自：<http://mp.weixin.qq.com/s?__biz=MzA3MDA2MjE2OQ==&amp;mid=210515085&amp;idx=1&amp;sn=20e75414b81d4614fd649ce37ed3f626&amp;scene=1&amp;srcid=RqVbpjfCsKctXCOyFCEI#rd>

#### 今日话题

分享下爬虫的使用和设计经验,如何抓取,存储,分析? - XiangZ

1. 昨天刚好看scrapy，有人用过么 - 何晨  
回: 用过，还不错 - 花生
2. 问: 爬虫的话，js渲染 一般怎么处理呢？爬虫自动渲染吗？ - 风轻轻  
回: phantomjs 页面渲染可以结合这个做 - 曾杰+
3. phantomjs 问题超多，效率不OK  
你肯定没研究过吧  
不说进程创建的资源浪费，就说集成到代码里，官道，阻塞，重复创建… 这种代价  
嗷嗷高…  
之前我也用这种架构，后来改了  
webkit编译一个，不用渲染，直接加载js渲染，就好…  
其实你要的是reflow阶段  
repait… 而且每次远程资源加载也是问题…采集一次费劲死 - 金灶沐
4. scrapy不错，调度，下载，存储，等中间件都可以自主开发 - 0x01流浪侠
5. js动态dom不好爬 flash的没法爬 - 每天都不知道吃什么  
回: 嗯，有办法爬的 爬接口  
若是文本编译在flash文件里，就下载下来，反编译，正则match文本 - Soony  
回: [尴尬]反编译… 新版本的加密，就算反编译成功，拿到的文本很多时候也不对… - 每天都不知道吃什么  
回: 嗯，有些是可以的  
的确不是所有的都行。不可以再想别的办法  
没办法就人工识别，人工录入。。。  
是个成本问题  
还可以截屏OCR... - Soony
6. 用webkit不错 可以分布式 或者selenium试试 - james
7. 我们有做一个简单的基于 Jsoup 的爬虫系统(Jsoup 能够自动判断网页字符集，这一点很不错)，分了三个后台进程。一个负责发布爬虫任务到消息队列，一个负责爬取网页和图片，还有一个负责解析。  
简单起见，消息队列用的是 SSDB 的队列。  
因为我们爬取的对象都是针对狭窄领域的，所以数据量不大，存储直接是关系型数据库，解析也是针对有效的个网站进行的标题正文的提取。  
每个目标网页，都有专门的类负责解析，这些类都是人工编写的  
其实没什么牛掰的，[偷笑] - Leon周
8. 怎么决定更新权重？  
这个才是重点吧。至于爬网页很多现成的，或者自己写也不是问题。识别编码就是先看头部，如果没有再看HTML里有没有，如果还是没有就一个个的尝试解码呀，对了就找到它的编码了 - 陈亦  
回: 哦，我们是有固定的几个网站去爬取  
就6,7个网站而已  
搜集行业新闻  
网页的字符集编码，我们一开始的确是这个做法，后来发现Jsoup有这个功能，就省得自己写了 - Leon周
9. 爬虫也不要太快，太快给目标网站造成负担过重  
可以使用selenium运行js  
否则人家封IP[呲牙] - Soony
10. 太快容易中对方的反爬虫策略，比如nginx记个数，检测到爬虫给你拒了就悲剧了 - 孟尧
11. 微博的首页抓太快就会封IP  
买的代理库也不行  
哎，主要是高匿名的IP太少  
感觉 10分钟吧 - 每周
12. 封IP一般也不会永久封，一个IP可能很多用户在用，封一段时间可能就会解除  
这个要看各个网站的策略了  
有些海外IP还不能用  
有时候搜US的网站，中国的IP就直接被block😂  
主要是很多爬虫是无视robots.txt的，想爬啥就爬啥 - Soony
13. 问: 你们都是从哪里搞的代理呢？免费的那种吗？  - 风轻轻  
回: 有免费的，写爬虫去爬回来的😂 也有买的 - Soony
14. 试过用云来当爬虫 量不太大的话 还可以 - 阿哄
15. 试过用云来当爬虫 量不太大的话 还可以  
代理网上免费的很多  
有接口可以直接调  
就是稳定，就呵呵了  
其实买个阿里云跑也行  
稳定的高匿名不好买  
淘宝以前好像能爬20万左右吧，忘了，  
微博首页6，7万左右  
单台 - 每周
16. 我的爬虫部署在家里，各种请求信息伪造，然后在每隔半小时重启下路由器，这样基本没被封过，当然我抓去频率不是很高 - 刘辉

#### 分享链接

1. 为什么你看了很多书，却依然没有洞见 http://mp.weixin.qq.com/s?__biz=MzA4ODM1MTMzMQ==&mid=208868155&idx=3&sn=a8c9b63c3ad4d15e492b3d2d688076ed - Meow
2. Android微信智能心跳方案 https://mp.weixin.qq.com/s?__biz=MzAwNDY1ODY2OQ==&mid=207243549&idx=1&sn=4ebe4beb8123f1b5ab58810ac8bc5994 - 黑夜路人
3. 代码分支管理指南 https://open.leancloud.cn/git-branch-guide.html - 陈亦
4. 细品这杯香浓的咖啡--阿里中间件高级专家沈询的Java之旅 http://toutiao.com/a4379197932/ - xingxing